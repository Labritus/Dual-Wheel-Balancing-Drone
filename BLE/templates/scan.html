<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>BLE Device Debug Assistant</title>
</head>
<body>
  <h2>üîç Bluetooth Device Debug Assistant</h2>
  <button onclick="scan()">Start Scanning</button>
  <pre id="log">Click to start scanning for devices...</pre>

  <script>
    async function scan() {
      try {
        const device = await navigator.bluetooth.requestDevice({
          acceptAllDevices: true,
          optionalServices: ['generic_access', '0000ffe0-0000-1000-8000-00805f9b34fb']
        });

        document.getElementById("log").textContent = `Device selected: ${device.name || '(Unnamed)'}\nConnecting...`;

        const server = await device.gatt.connect();
        const services = await server.getPrimaryServices();

        for (const service of services) {
          document.getElementById("log").textContent += `\nService UUID: ${service.uuid}`;
          const chars = await service.getCharacteristics();
          for (const char of chars) {
            const props = Object.keys(char.properties).filter(p => char.properties[p]);
            document.getElementById("log").textContent += `\n ‚Ü≥ Characteristic UUID: ${char.uuid}, Properties: ${props.join(', ')}`;
          }
        }

      } catch (err) {
        document.getElementById("log").textContent = `‚ùå Error: ${err.message}`;
        console.error(err);
      }
    }
  </script>
</body>
</html>
